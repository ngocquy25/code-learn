{"ast":null,"code":"import _asyncToGenerator from\"/Users/jirou/Coding/React/code-learn/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jirou/Coding/React/code-learn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/jirou/Coding/React/code-learn/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useRef,useState}from\"react\";import Editor from\"@monaco-editor/react\";// import { ResponsiveMonacoEditor } from \"responsive-react-monaco-editor\";\nimport{Nav,Button,Navbar,Form,ToggleButton}from\"react-bootstrap\";import{HiMoon,HiRefresh}from\"react-icons/hi\";import{BsSunFill}from\"react-icons/bs\";import'bootstrap/dist/css/bootstrap.css';import'./Editor.css';import Testcase from\"../Testcase/Testcase\";import Loading from\"../Loading/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CodeEditor=function CodeEditor(_ref){var question=_ref.question;var langOptions=[{value:'none',label:'Select language'},{value:'javascript',label:'Javascript (node v14.7.0)'},{value:'cpp',label:'C++ (g++ 9.2.1)'},{value:'python',label:'Python (3.9.1)'},{value:'java',label:'Java (17.0.1)'}];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),defaultCode=_useState2[0],setDefaultCode=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),code=_useState4[0],setCode=_useState4[1];var _useState5=useState('none'),_useState6=_slicedToArray(_useState5,2),lang=_useState6[0],setLang=_useState6[1];var _useState7=useState('vs-dark'),_useState8=_slicedToArray(_useState7,2),theme=_useState8[0],setTheme=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),currentOutput=_useState10[0],setCurrentOutput=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),output=_useState12[0],setOutput=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),loading=_useState14[0],setLoading=_useState14[1];var handleLanguage=function handleLanguage(e,init_code){var l=e.target.value;if(l===\"none\"){setDefaultCode('');setCode('');}else{setLang(l);if(l===\"python\")l=\"py\";else if(l===\"javascript\")l=\"js\";var c=init_code.find(function(x){return x._language===l;})._function;setDefaultCode(c);setCode(c);}};var changeTheme=function changeTheme(){if(theme==='light')setTheme('vs-dark');else setTheme('light');};var editorRef=useRef(null);var handleEditorDidMount=function handleEditorDidMount(editor,monaco){editorRef.current=editor;};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var l,content,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCurrentOutput(question[0].question_id);l=lang;if(l===\"python\")l=\"py\";else if(l===\"javascript\")l=\"js\";content=JSON.stringify({question:question[0].question_id,language:l,code:code});console.log(\"post:\",content);_context.prev=5;setLoading(true);_context.next=9;return fetch('http://runcode.cyberlearn.vn/submit',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:content});case 9:res=_context.sent;_context.next=12;return res.json();case 12:data=_context.sent;console.log(\"return:\",data);setOutput(data);setLoading(false);_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](5);console.log(_context.t0);case 21:case\"end\":return _context.stop();}}},_callee,null,[[5,18]]);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();// useEffect(() => {\n//     handleSubmit()\n// }, []);\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(_Fragment,{children:[question.map(function(_ref3){var question_id=_ref3.question_id,init_code=_ref3.init_code;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Navbar,{bg:\"dark\",variant:\"dark\",className:\"shadow-down\",children:/*#__PURE__*/_jsxs(Nav,{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(Nav.Item,{className:\"first-section\",children:/*#__PURE__*/_jsx(ToggleButton,{className:\"btn-toggle\",onClick:changeTheme,children:theme===\"light\"?/*#__PURE__*/_jsx(HiMoon,{className:\"icon\"}):/*#__PURE__*/_jsx(BsSunFill,{className:\"icon\"})})}),/*#__PURE__*/_jsx(Nav.Item,{className:\"me-auto\",children:/*#__PURE__*/_jsx(ToggleButton,{className:\"btn-toggle\",onClick:function onClick(){return setCode(defaultCode);},children:/*#__PURE__*/_jsx(HiRefresh,{className:\"icon\"})})}),/*#__PURE__*/_jsx(Nav.Item,{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Form.Select,{className:\"select-language\",onChange:function onChange(e){return handleLanguage(e,init_code);},children:langOptions.map(function(lang){return/*#__PURE__*/_jsx(\"option\",{value:lang.value,children:lang.label},lang.value);})})})]})})},question_id);}),/*#__PURE__*/_jsx(Editor,{width:\"99%\",height:\"100%\",theme:theme// defaultLanguage=\"javascript\"\n,language:lang// defaultValue={defaultCode}\n,value:code,onChange:function onChange(value){return setCode(value);},onMount:handleEditorDidMount,options:{fontSize:14,tabSize:4,minimap:{enabled:false}}}),/*#__PURE__*/_jsx(Testcase,{question:question,current:currentOutput,output:output}),/*#__PURE__*/_jsx(Navbar,{bg:\"dark\",variant:\"dark\",className:\"footer shadow-up\",children:/*#__PURE__*/_jsx(Button,{className:\"btn-submit\",type:\"submit\",onClick:handleSubmit,children:\"Submit\"})})]}),loading&&/*#__PURE__*/_jsx(Loading,{})]});};export default CodeEditor;","map":{"version":3,"sources":["/Users/jirou/Coding/React/code-learn/src/components/Editor/CodeEditor.js"],"names":["React","useEffect","useRef","useState","Editor","Nav","Button","Navbar","Form","ToggleButton","HiMoon","HiRefresh","BsSunFill","Testcase","Loading","CodeEditor","question","langOptions","value","label","defaultCode","setDefaultCode","code","setCode","lang","setLang","theme","setTheme","currentOutput","setCurrentOutput","output","setOutput","loading","setLoading","handleLanguage","e","init_code","l","target","c","find","x","_language","_function","changeTheme","editorRef","handleEditorDidMount","editor","monaco","current","handleSubmit","question_id","content","JSON","stringify","language","console","log","fetch","method","headers","body","res","json","data","map","fontSize","tabSize","minimap","enabled"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport Editor from \"@monaco-editor/react\";\n// import { ResponsiveMonacoEditor } from \"responsive-react-monaco-editor\";\nimport { Nav, Button, Navbar, Form, ToggleButton } from \"react-bootstrap\";\nimport { HiMoon, HiRefresh } from \"react-icons/hi\";\nimport { BsSunFill } from \"react-icons/bs\";\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './Editor.css';\nimport Testcase from \"../Testcase/Testcase\";\nimport Loading from \"../Loading/Loading\";\n\nconst CodeEditor = ({ question }) => {\n\n    const langOptions = [\n        { value: 'none', label: 'Select language'},\n        { value: 'javascript', label: 'Javascript (node v14.7.0)' },\n        { value: 'cpp', label: 'C++ (g++ 9.2.1)' },\n        { value: 'python', label: 'Python (3.9.1)' },\n        { value: 'java', label: 'Java (17.0.1)' },\n    ];\n\n    const [defaultCode, setDefaultCode] = useState('');\n    const [code, setCode] = useState('');\n    const [lang, setLang] = useState('none');\n    const [theme, setTheme] = useState('vs-dark');\n    const [currentOutput, setCurrentOutput] = useState();\n    const [output, setOutput] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    const handleLanguage = (e, init_code) => {\n        let l = e.target.value\n        if (l === \"none\") {\n            setDefaultCode('');\n            setCode('');\n        } else {\n            setLang(l);\n            if (l === \"python\") l = \"py\";\n            else if (l === \"javascript\") l = \"js\";\n            let c = init_code.find(x => x._language === l)._function;\n            setDefaultCode(c);\n            setCode(c);\n        }\n    }\n\n    const changeTheme = () => {\n        if (theme === 'light') setTheme('vs-dark');\n        else setTheme('light');\n    }\n\n    const editorRef = useRef(null);\n\n    const handleEditorDidMount = (editor, monaco) => {\n        editorRef.current = editor;\n    }\n\n    const handleSubmit = async () => {\n        setCurrentOutput(question[0].question_id);\n        let l = lang;\n        if (l === \"python\") l = \"py\";\n        else if (l === \"javascript\") l = \"js\";\n\n        let content = JSON.stringify({\n            question: question[0].question_id,\n            language: l,\n            code: code\n        });\n\n        console.log(\"post:\", content);\n\n        try {\n            setLoading(true);\n            const res = await fetch('http://runcode.cyberlearn.vn/submit', {\n                method: 'POST',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: content\n            });\n\n            const data = await res.json();\n            console.log(\"return:\", data);\n            setOutput(data);\n            setLoading(false);\n        }\n        catch (e) {\n            console.log(e);\n        }\n    };\n\n    // useEffect(() => {\n    //     handleSubmit()\n    // }, []);\n\n    return(\n        <>\n            <>\n            {question.map(({\n                question_id,\n                init_code\n            }) => (\n            <div key={question_id}>\n            <Navbar bg=\"dark\" variant=\"dark\" className=\"shadow-down\">\n                <Nav className=\"container-fluid\">\n                    <Nav.Item className=\"first-section\">\n                        <ToggleButton className=\"btn-toggle\" onClick={changeTheme} >\n                            {theme === \"light\" ? \n                            <HiMoon className=\"icon\"/> : <BsSunFill className=\"icon\"/>}\n                        </ToggleButton>\n                    </Nav.Item>\n                    <Nav.Item className=\"me-auto\">\n                        <ToggleButton className=\"btn-toggle\" onClick={() => setCode(defaultCode)} >\n                            <HiRefresh className=\"icon\"/>\n                        </ToggleButton>\n                    </Nav.Item>\n                    <Nav.Item className=\"ml-auto\">\n                        <Form.Select className=\"select-language\" onChange={e => handleLanguage(e, init_code)}>\n                            {/* <option>Select language</option> */}\n                            {langOptions.map(lang => (\n                            <option key={lang.value} value={lang.value}>{lang.label}</option>\n                            ))}\n                        </Form.Select>\n                    </Nav.Item>\n                </Nav>\n            </Navbar>\n            </div> \n            ))}\n            \n            <Editor\n                width=\"99%\"\n                height=\"100%\"\n                theme={theme}\n                // defaultLanguage=\"javascript\"\n                language={lang}\n                // defaultValue={defaultCode}\n                value={code}\n                onChange={(value) => setCode(value)}\n                onMount={handleEditorDidMount}\n                options={{\n                    fontSize: 14,\n                    tabSize: 4,\n                    minimap: {\n                        enabled: false\n                    },\n                }}\n                \n            />\n               \n            <Testcase question={question} current={currentOutput} output={output}/>\n\n            <Navbar bg=\"dark\" variant=\"dark\" className=\"footer shadow-up\">\n                <Button className=\"btn-submit\" type=\"submit\"\n                    onClick={handleSubmit}>Submit</Button>  \n            </Navbar>\n            </>\n            {loading && <Loading/>}\n        </>\n    );\n};\n\nexport default CodeEditor;\n"]},"metadata":{},"sourceType":"module"}